<?php
header("Content-type: text/html;charset=utf-8");
echo '<?xml version="1.0" encoding="UTF-8" ?>';
?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="de">
  <head>
    <title><?= $this->title ?></title>
    <meta http-equiv="charset" content="utf-8" />
    <script type="text/javascript" src="style/jquery.js"></script>
    <script type="text/javascript" src="style/jquery-ui.js"></script>
<?php
if (isset($_GET['useskin']) && $_GET['useskin'] == 'python')
{
?>
    <!-- python design -->
    <link type="text/css" rel="stylesheet" href="style/python.css" 
      title="Python" />
    <link type="text/css" rel="stylesheet" href="style/jquery-ui.css"
      title="Python" />
    <script type="text/javascript">
    // change links
    $(function() {
      $("a").each(function(a) { 
        var url = document.URL.match(/(.*)\?.*|([^\?]*)/);
        if (url == null) return;
        url = url[1]; 
        var regexp = new RegExp(url); 
        if (regexp.exec(this.href) != null) { 
          if (this.href.match(/&useskin=python/) == null) { 
            if (this.href.match(/\?/)) {
              this.href += "&useskin=python"; 
            } else {
              this.href += "?useskin=python";
            }
          } 
        } 
      })
    });
    </script>
<?php
}
else
{
?>
    <!-- default design -->
    <link type="text/css" rel="stylesheet" href="style/main.css" 
      title="Grau-Rot" />
    <link type="text/css" rel="stylesheet" href="style/jquery-ui.css"
      title="Grau-Rot" />
<?php
}
?>
    <script type="text/javascript">
      Array.prototype.unique = function() {
        var o = {};
        var tmp = [];
        for(var i = 0 ; i < this.length; i++) o[this[i]] = true;
        for(var i in o) tmp[tmp.length] = i;
        return tmp;
      }
      String.prototype.empty = function() {
        return this.match(/^\s*$/) != null;
      }
      // show javascript-only texts
      $(function() { $('.javascript-only').css('display', 'inline'); } );
      // validate function
      function validate_timestamp(timestamp) {
        var m = timestamp.match(/^\d\d\d\d-\d\d-\d\d$/);
        if (!m || m[0] < 2000 || m[1] < 1 || m[1] > 12 || m[2] < 1 || 
            m[2] > 31) {
          return false;
        }
        return true;
      }
      // show an error icon
      function show_error(node_id) {
        $(node_id).parent().append(' <img src="style/warning.png" class="warning-image" />');
      }
      // remove all error icons
      function remove_errors() {
        $('.warning-image').remove();
      }
    </script>
  </head>
  <body>
    <table id="status-overview">
      <tr id="so-headers"><th></th><th>Datenbank</th><th>Wikipedia</th></tr>
      <tr id="so-newbies"><td>Neulinge</td><td><?= $this->data['newbie_count_db'] ?></td><td><?= $this->data['newbie_count_wp'] ?></td></tr>
      <tr id="so-mentors"><td>Mentoren</td><td><?= $this->data['mentor_count_db'] ?></td><td><?= $this->data['mentor_count_wp'] ?></td></tr>
    </table>

    <div id="navi">
    <ul id="naviList">
      <li><a href="index.php">Startseite</a></li>
      <li><a href="index.php?action=list">Mentorenübersicht</a></li>
      <li><a href="index.php?action=search">Suche</a></li>
      <li><a href="index.php?action=stat">Statistik</a></li>
      <li><a href="index.php?action=about">Weitere Informationen</a></li>
    </ul>
    </div>

<?php
if ($this->access->logged_in())
{
?>
    <p id="h-logged-in">Angemeldet als <?= $this->access->user() ?>. <a href="index.php?action=changepw">Passwort ändern.</a> <a href="index.php?action=logout">Abmelden.</a></p>
<?php
}
else
{
?>
    <p id="h-login"><a href="index.php?action=login">Anmelden</a></p>
<?php
}
?>

    <div id="main">
    <div id="content">
